---
title: "Project 1"
author: "Dionte Watie"
date: "6/17/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown


```{r}
library(httr)
library(readr)
library(dplyr)
library(jsonlite)
library(tidyverse)
library(DBI)
library(RSQLite)
library(devtools)
library(bigrquery)
library(rvest)
```

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r Franchise, echo=FALSE}
franchise <- function(id){
  franUrl <- paste0("https://records.nhl.com/site/api", "/franchise")
  getFran <- GET(franUrl)
  getFran
  franCont <- content(getFran, as = "text")
  franJson <- fromJSON(franCont, flatten = TRUE)
  franJson
  franList <- as_tibble(franJson$data)
  franList
  }
franchise(19171918)
```


```{r FranchiseTeamTotals, echo=FALSE}
franTeamTot <- function(id){
  TeamUrl <- paste0("https://records.nhl.com/site/api", "/franchise-team-totals")
  getTeam <- GET(TeamUrl)
  getTeam
  TeamCont <- content(getTeam, as = "text")
  TeamJson <- fromJSON(TeamCont, flatten = TRUE)
  TeamJson
  teamList <- as_tibble(TeamJson$data) %>% rename(name = teamName)
  teamList
}



franTeamTot(activeFranchise)
```





```{r SeasonRecords, echo=FALSE}
seasonRecords <- function(id){
  SeasUrl <- paste0("https://records.nhl.com/site/api", "/franchise-season-records?cayenneExp=franchiseId")
  GetSeas <- GET(SeasUrl)
  GetSeas
  SeasCont <- content(GetSeas, as = "text")
  SeasJson <- fromJSON(SeasCont, flatten = TRUE)
  SeasJson
  Seaslist <- as_tibble(SeasJson$data)
  Seaslist
}
seasonRecords(fewestGoalsAgainst)
```




```{r GoalieRecords, echo=FALSE}
goalieRec <- function(id){
  getGoal <- paste0("https://records.nhl.com/site/api", "/franchise-goalie-records")
  goalRec <- GET(getGoal)
  getGoal
  goalCont <- content(getGoal, as = "text")
  goalJson <- fromJSON(goalCont, flatten = TRUE)
  goalJson
  
}
goalieRec()
```



```{r SkaterRecords, echo=FALSE}
skateRec <- function(id){
  skateUrl <- paste0("https://records.nhl.com/site/api", "/franchise-skater-records?cayenneExp=franchiseId")
  getSkate <- GET(skateUrl)
  getSkate
  skateCont <- content(getSkate, as = "text")
  skateJson <- fromJSON(skateCont, flatten = TRUE)
  skateJson
  skateList <- as_tibble(skateJson$data, nrow(10), ncol(30))
  skateList
  }
skateRec(417)
```


```{r FranchiseDetails, echo=FALSE}
FranDetails <- function(id){
  Fran_url <- paste0("https://records.nhl.com/site/api", "/franchise-detail?cayenneExp=mostRecentTeamId")
  GetDetails <- GET(Fran_url)
  GetDetails
  ContentDetails <- content(GetDetails, as = "text")
  JsonDetails <- fromJSON(ContentDetails, flatten = TRUE)
  JsonDetails
}
FranDetails(captainHistory)
```


```{r}
Modifier <- function(x){
  ModUrl <- paste0("https://statsapi.web.nhl.com/api/v1", "/teams?expand=team.stats")
  GetMod <- GET(ModUrl)
  GetMod
  ModCont <- content(GetMod, as = "text", encoding = "UTF-8")
  ModJson <- fromJSON(ModCont, flatten = TRUE)
  ModJson
  ModList <- as_tibble(ModJson$teams)
  ModList
  }
```



```{r}
nhlEndpoints <- function(franchise, franTeamTot, seasonRecords, skateRec, FranDetails, Modifier){
    if(franchise){ franchise(id)}
  
    if(franTeamTot){franTeamTot(id)}
  
    if(seasonRecords){seasonRecords(id)}
    
    if(skateRec){seasonRecords(id)}
  
    if(FranchisDetails){FranchisDetails(id)}
  
}
nhlEndpoints(5)
```



```{r}
statJoin <- left_join(teamList, List, na.rm = TRUE)
statJoin
statAvgs <- summarise(statJoin, avgGamesPlayed = mean(statjoin$gamesPlayed), avgGoalsFor = mean(statjoin$goalsFor), avgGoalsAgainst = mean(statjoin$goalsAgainst) )
```



```{r}

```


